{% extends 'clothes/layout.html' %}

{% block title %}{{title}}{% endblock %}

{% block header %}
<h1 class="display-2 text-success text-center">Search Cloth</h1>
{% endblock %}

{% block content %}
<p class="h4">{{message|safe}}</p>
<form action="{% url 'search' %}" method="POST">
    {% csrf_token %}
    {{ form.as_p }}
    <tr><th></th><td>
        <input type="submit" value="Search" class="btn btn-success w-100">
    </td></tr>
</form>
<table class="table">
    <tr>
        <th>名称</th>
        <th>種類</th>
        <th>ブランド名</th>
        <th>値段</th>
    </tr>
    {% for item in data %}
    <tr>
        {% if login_user == item.owner %}
        <td>{{item.cloth_name}}</td>
        <td>{{item.get_item_info_display}}</td>
        <td>{{item.brand_name}}</td>
        <td>{{item.price}}</td>
        <td><a class="btn btn-secondary w-100" href="{% url 'detail' item.id %}">Detail</a></td>
        {% endif %}
    </tr>
    {% endfor %}
</table>
<ul class="pagination justify-content-center">
    {% if data.has_previous %}
    <li class="page-item">
        <a class="page-link" href="{% url 'search' %}">&laquo; First</a>
    </li>
    <li class="page-item">
        <a class="page-link" href="{% url 'search' %}/{{data.previous_page_number}}">&laquo; Prev</a>
    </li>
    {% else %}
    <li class="page-item">
        <a class="page-link">&laquo; First</a>
    </li>
    <li class="page-item">
        <a class="page-link">&laquo; Prev</a>
    </li>
    {% endif %}
    <li class="page-item">
        <a class="page-link">{{data.number}}/{{data.paginator.num_pages}}</a>
    </li>
    {% if data.has_next %}
    <li class="page-item">
        <a class="page-link" href="{% url 'search' %}/{{data.next_page_number}}">Next &raquo;</a>
    </li>
    <li class="page-item">
        <a class="page-link" href="{% url 'search' %}/{{data.paginator.num_pages}}">Last &raquo;</a>
    </li>
    {% else %}
    <li class="page-item">
        <a class="page-link">Next &raquo;</a>
    </li>
    <li class="page-item">
        <a class="page-link">Last &raquo;</a>
    </li>
    {% endif %}
</ul>
<p class="h2 text-secondary">服の合計金額：{{sum_price}}</p>
<br>
<a class="btn btn-primary w-100" href="{% url 'top' %}">TOPに戻る</a>
{% endblock %}